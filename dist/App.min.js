!(function(){"use strict";function n(){}function t(){this.map=new n}function e(n,t){I(n),t.removeChild(n.$n)}function a(n,t,a){for(;a<n.length;)e(n[a++],t)}function r(n,t){for(var e=0;e<n.length;)I(n[e++]);t.textContent=""}function o(n,t){return n.$s===t.$s&&(t.$s.u(t,n),!0)}function c(n,t,e,a){null===a?u(n,t,e):i(n,t,e,a)}function i(n,t,e,a){for(;e<t.length;)n.insertBefore((t[e]=C(t[e])).$n,a),++e}function u(n,t,e){for(;e<t.length;)n.appendChild((t[e]=C(t[e])).$n),++e}function s(n,t,e){var a=document.createDocumentFragment(),r=D(n,a,t);return E(e,a),r}function d(n,t,e,r){for(var o=0;o<t.length&&o<e.length;o++)t[o]=N(e[o],t[o]);o<t.length?c(n,t,o,r):a(e,n,o)}function l(n,t,e){e.length?t.length?d(n,t,e,null):r(e,n):u(n,t,0)}function f(n,t,e,o){return n instanceof Array?(e?l(t,n,o):d(t.parentNode,n,o,t),t):e?(r(o,t),D(!0,t,n)):void a(o,t.parentNode,0)}function p(n,t,e){if(!(n instanceof Object))return t.nodeValue=w(n)?"":n,t}function h(n,t,e,a){var r=void 0;if(n&&o(r=a.$r||a,n))return n.$r=r,t}function v(t,e,a,r){this._boundActions=new n,this._parentInst=a,this.actions=r,this.props=e,this.render=t,this.bindSend=this.bindSend.bind(this),this.state=r.onInit(this),this.$n=O(this._instance=t(this))}function b(n,t,e,a){return new v(n,t,e,a)}function m(n,t){var e=n(t);return O(e),e}function g(n,t,e,a){var r=(t?b:m)(n,e||k,a,t);return r}function y(n,t,e,a){var r=t?a.updateProps(e):N(a,n(e));return r}function O(n){var t=n.$s.c(n);return n.$n=t,t.xvdom=n,t}function C(n){var t=n.$s,e=t.r.pop(n.key);return e?(t.u(n,e),e):(O(n),n)}function D(n,t,e){return e instanceof Array?(u(t,e,0),n?t:t.appendChild(x(""))):t.appendChild(e instanceof Object?O(e):x(w(e)?"":e))}function A(n,t,e,a){return(t instanceof Object?t instanceof Array?f(e,a,n,t):h(e,a,n,t):p(e,a,n))||s(n,e,a)}function N(n,t){return o(n,t)?n:(E(n.$n,(t=C(t)).$n),I(n),t)}function $(n){var t=this.tabs,e=this.selected,a=this.hrefPrefix,r=t[n],o=r.href,c=r.title;return{$s:B,a:"Tabs-tab u-cursor-pointer l-padding-h4 l-padding-b2 "+(e===n?"is-selected":""),c:""+a+(o||n),d:c||n,key:n}}function P(){if(firebase.auth().currentUser)return on.unsetCurrent(),firebase.auth().signOut();var n=new firebase.auth.GoogleAuthProvider;n.addScope("https://www.googleapis.com/auth/plus.login"),firebase.auth().signInWithPopup(n).catch((function(n){return console.error(n)}))}var w=function(n){return null==n||n===!0||n===!1},k={},S={push:function(){},pop:function(){}};n.prototype=Object.create(null),t.prototype.push=function(n){var t=n.key,e=this.map;n.$x=e[t],e[t]=n},t.prototype.pop=function(n){var t=this.map[n];if(t)return this.map[n]=t.$x,t};var I=function(n){n.$s.r.push(n)},x=function(n){return document.createTextNode(n)},E=function(n,t){var e=n.parentNode;e&&e.replaceChild(t,n)};v.prototype.updateProps=function(n){var t=this.props;return this.props=n,this.actions.onProps?this.send("onProps",t):this.rerender(),this},v.prototype.bindSend=function(n){return this._boundActions[n]||(this._boundActions[n]=this.send.bind(this,n))},v.prototype.send=function(n,t){var e=void 0,a=this.actions[n];a&&(e=a(this,t))!=this.state&&(this.state=e,this.rerender())},v.prototype.rerender=function(){var n=N(this._instance,this.render(this));this._instance=n,n.$n.xvdom=this._parentInst};var L=function(n){return C(n).$n},T=function(n,t){return N(n.xvdom,t).$n},j=function(n){e(n.xvdom,n.parentNode)},z={createComponent:g,createDynamic:D,el:function(n){return document.createElement(n)},render:L,rerender:T,unmount:j,updateComponent:y,updateDynamic:A,Pool:t,DEADPOOL:S},_=z.el,R={c:function(n){var t=_("i");return n.b=t,t.className=n.a,t.onClickArg=n.c,t.onClickFn=n.d,t.onclick=n.e,t},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.className=e,t.a=e),e=n.c,e!==t.c&&(t.b.onClickArg=e,t.c=e),e=n.d,e!==t.d&&(t.b.onClickFn=e,t.d=e),e=n.e,e!==t.e&&(t.b.onclick=e,t.e=e)},r:z.DEADPOOL},q=function(n){var t=n.currentTarget;t.onClickFn(t.onClickArg)},M=function(n){var t=n.className,e=n.name,a=n.onClick,r=n.onClickArg,o=n.size,c=void 0===o?"med":o;return{$s:R,a:"Icon Icon--"+c+" octicon octicon-"+e+" "+t+" t-center",c:r,d:a,e:a&&q}},U=z.createDynamic,F=z.el,G=z.updateDynamic,J={c:function(n){var t=F("div");return t.className="Tabs layout horizontal end center-justified c-white l-height10 t-font-size-14 t-uppercase t-normal",n.b=U(!0,t,n.a),t},u:function(n,t){n.a!==t.a&&(t.b=G(!0,t.a,t.a=n.a,t.b))},r:z.DEADPOOL},B={c:function(n){var t=F("a");return n.b=t,t.className=n.a,null!=n.c&&(t.href=n.c),n.e=U(!0,t,n.d),t},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.className=e,t.a=e),e=n.c,e!==t.c&&(t.b.href!==e&&(t.b.href=e),t.c=e),n.d!==t.d&&(t.e=G(!0,t.d,t.d=n.d,t.e))},r:z.DEADPOOL},Y=function(n){return{$s:J,a:Object.keys(n.tabs).map($,n)}},H="ticker:storage",V=void 0;try{V=JSON.parse(localStorage.getItem(H))}catch(n){}V||localStorage.setItem(H,JSON.stringify(V=[]));var K=function(){var n=V.pop();n&&(localStorage.removeItem(n),Q(n,!1))},W=function(n,t){for(var e=V.length;e--;)try{return void localStorage.setItem(n,t)}catch(n){K()}},Q=function(n,t){var e=V.indexOf(n);e>=0&&V.splice(e,1),t&&V.unshift(n),W(H,JSON.stringify(V))},X=function(n){Q(n,!0)},Z={getItem:function(n){var t=localStorage.getItem(n);return t&&X(n),t},setItem:function(n,t){return W(n,t),X(n),t},getItemObj:function(n){var t=this.getItem(n),e=t&&JSON.parse(t);return e},setItemObj:function(n,t){return this.setItem(n,JSON.stringify(t)),t}},nn=(function(){function n(n){this.value=n}function t(t){function e(n,t){return new Promise(function(e,r){var i={key:n,arg:t,resolve:e,reject:r,next:null};c?c=c.next=i:(o=c=i,a(n,t))})}function a(e,o){try{var c=t[e](o),i=c.value;i instanceof n?Promise.resolve(i.value).then((function(n){a("next",n)}),(function(n){a("throw",n)})):r(c.done?"return":"normal",c.value)}catch(n){r("throw",n)}}function r(n,t){switch(n){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?a(o.key,o.arg):c=null}var o,c;this._invoke=e,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(n){return this._invoke("next",n)},t.prototype.throw=function(n){return this._invoke("throw",n)},t.prototype.return=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new t(n.apply(this,arguments))}},await:function(t){return new n(t)}}}(),Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n}),tn=(function(){function n(n,t){var e=[],a=!0,r=!1,o=void 0;try{for(var c,i=n[Symbol.iterator]();!(a=(c=i.next()).done)&&(e.push(c.value),!t||e.length!==t);a=!0);}catch(n){r=!0,o=n}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),en="rc:lastLoggedInUserId",an=function(n){return firebase.database().ref("users/"+n)},rn=function(n){return Z.setItemObj("rc:"+n.id,n)},on={current:function(){var n=Z.getItem(en);if(n)return this.localGet(n)},getCurrentId:function(){return Z.getItem(en)},setCurrent:function(n){return Z.setItem(en,n)},unsetCurrent:function(){var n=this.current();n&&(Z.setItemObj("rc:"+n.id,""),Z.setItem(en,""))},localGet:function(n){return Z.getItemObj("rc:"+n)},save:function(n){return new Promise(function(t,e){an(n.id).set(n,(function(a){return a?e(a):void t(rn(nn({},n)))}))})},get:function(n){return new Promise(function(t,e){an(n).once("value",(function(n){var a=n.val();return a?void t(rn(a)):e("Couldn't find User")}))})}},cn=function(n,t,e){var a=function(e){var a=e.props,r=e.bindSend,o="function"==typeof n?n(a):n;return o[t](a).then(r("onLoadModel")),null};return e.state={onInit:a,onProps:a,onLoadModel:function(n,t){return t},refresh:function(n){return a(n),n.state}},e},un=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return firebase.database().ref("users/"+on.getCurrentId()+"/schools/"+n)},sn={query:function(){var n=on.getCurrentId;return n?new Promise(function(n,t){un().once("value",(function(e){var a=e.val();return a?void n(a):t("Couldn't find schools for user "+id)}))}):void console.log("No user!")},create:function(n){var t=un().push();t.set({name:n})},updateName:function(n,t){un(n).update({name:t})},update:function(n,t){return un(n).update(t)},get:function(n){var t=n.id;return new Promise(function(n,e){un(t).once("value",(function(a){var r=a.val();return r?void n(r):e("Couldn't find schools for user "+t)}))})}},dn=z.createComponent,ln=z.createDynamic,fn=z.el,pn=z.updateComponent,hn=z.updateDynamic,vn={c:function(n){var t,e,a,r=fn("div");return n.b=r,r.className=n.a,t=fn("div"),n.d=t,t.className=n.c,e=fn("div"),e.className="layout horizontal center-center l-height14",n.f=ln(!1,e,n.e),a=fn("div"),a.className="l-padding-r0 t-truncate t-font-size-20 flex",n.h=a,a.textContent=n.g,e.appendChild(a),a=(n.j=dn(M,M.state,{className:"t-bold c-white l-padding-h4",onClick:n.i,size:"small"},n)).$n,e.appendChild(a),n.l=ln(!1,e,n.k),t.appendChild(e),n.n=ln(!1,t,n.m),r.appendChild(t),r},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.className=e,t.a=e),e=n.c,e!==t.c&&(t.d.className=e,t.c=e),n.e!==t.e&&(t.f=hn(!1,t.e,t.e=n.e,t.f)),e=n.g,e!==t.g&&(t.h.textContent=e,t.g=e),n.i!==t.i&&(t.j=pn(M,M.state,{className:"t-bold c-white l-padding-h4",onClick:t.i=n.i,size:"small"},t.j)),n.k!==t.k&&(t.l=hn(!1,t.k,t.k=n.k,t.l)),n.m!==t.m&&(t.n=hn(!1,t.m,t.m=n.m,t.n))},r:z.DEADPOOL},bn=function(){},mn=function(n){var t=n.props,e=t.title,a=t.secondary,r=t.left,o=t.right,c=n.state.scrollClass;return{$s:vn,a:"AppToolbar "+(a?"AppToolbar--withSecondary":""),c:"AppToolbar-bar fixed fixed--top c-white bg-purple "+c,e:r,g:e,i:bn,k:o,m:a}},gn=function(n){var t=document.body?document.body.scrollTop:0,e=t>56&&t-n>0;return{scrollTop:t,scrollClass:e?" is-scrolling-down":""}};mn.state={onInit:function(n){var t=n.bindSend;return requestAnimationFrame((function(){return document.body.onscroll=t("onScroll")})),gn(0)},onScroll:function(n){var t=n.state.scrollTop;return gn(t)}};var yn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return firebase.database().ref("users/"+on.getCurrentId()+"/schools/"+n+"/students")},On={query:function(n){var t=n.id,e=on.getCurrentId;return e?new Promise(function(n){yn(t).once("value",(function(t){n(t.val()||[])}))}):(console.log("No user!"),Promise.resolve([]))},update:function(n,t){return yn(n).set(t)}},Cn=z.createComponent,Dn=z.createDynamic,An=z.el,Nn=z.updateComponent,$n=z.updateDynamic,Pn={c:function(n){var t,e,a=An("div");return t=An("div"),t.className="Card",e=An("div"),e.className="Card-title",n.b=Dn(!1,e,n.a),n.d=Dn(!1,e,n.c),t.appendChild(e),a.appendChild(t),a},u:function(n,t){n.a!==t.a&&(t.b=$n(!1,t.a,t.a=n.a,t.b)),n.c!==t.c&&(t.d=$n(!1,t.c,t.c=n.c,t.d))},r:z.DEADPOOL},wn={c:function(){var n=An("h1");return n.className="c-gray-dark t-center",n.appendChild(document.createTextNode("No students")),n},u:function(){},r:z.DEADPOOL},kn={c:function(n){var t,e=An("div");return e.className="List-item layout horizontal",t=An("span"),t.className="flex",n.b=Dn(!0,t,n.a),e.appendChild(t),t=An("a"),n.d=t,t.onclick=n.c,t.appendChild(document.createTextNode("remove")),e.appendChild(t),e},u:function(n,t){var e;n.a!==t.a&&(t.b=$n(!0,t.a,t.a=n.a,t.b)),e=n.c,e!==t.c&&(t.d.onclick=e,t.c=e)},r:z.DEADPOOL},Sn={c:function(n){var t=(n.d=Cn(xn,xn.state,{id:n.a,students:n.b,onAdd:n.c},n)).$n;return t},u:function(n,t){n.b===t.b&&n.a===t.a&&n.c===t.c||(t.d=Nn(xn,xn.state,{id:t.a=n.a,students:t.b=n.b,onAdd:t.c=n.c},t.d))},r:z.DEADPOOL},In={c:function(n){var t,e=An("div");return e.className="layout horizontal",t=An("input"),t.className="SchoolPage-input flex",n.b=t,t.oninput=n.a,null!=n.c&&(t.value=n.c),t.placeholder="Student's Name",e.appendChild(t),t=An("a"),n.e=t,t.hidden=n.d,t.className="self-center l-margin-l2",t.onclick=n.f,t.appendChild(document.createTextNode("Add")),e.appendChild(t),e},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.oninput=e,t.a=e),e=n.c,e!==t.c&&(t.b.value!==e&&(t.b.value=e),t.c=e),e=n.d,e!==t.d&&(t.e.hidden=e,t.d=e),e=n.f,e!==t.f&&(t.e.onclick=e,t.f=e)},r:z.DEADPOOL},xn=function(n){var t=n.state,e=n.bindSend;return{$s:In,a:e("updateName"),c:t,d:!t,f:e("addStudent")}};xn.state={onInit:function(){return""},onProps:function(){return""},updateName:function(n,t){return t.target.value},addStudent:function(n,t){var e=n.props,a=e.id,r=e.students,o=e.onAdd,c=n.state;return c&&r.indexOf(c)===-1&&On.update(a,r.concat(c)).then(o),""}};var En=cn(On,"query",(function(n){var t=n.props.id,e=n.state,a=n.bindSend;return{$s:Pn,a:e&&{$s:Sn,a:t,b:e,c:a("refresh")},c:e&&e.length?e.map((function(n,r){return{$s:kn,a:n,c:function(){On.update(t,e.filter((function(t){return t!==n}))).then(a("refresh"))},key:n}})):[{$s:wn,key:"EMPTY"}]}})),Ln=10,Tn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return firebase.database().ref("users/"+on.getCurrentId()+"/schools/"+n+"/seating")},jn=function(n){for(var t=n.slice(),e=[];t.length>0;)e.push(t.splice(0,Ln));return e},zn={query:function(n){var t=n.id,e=on.getCurrentId;return e?new Promise(function(n){Tn(t).once("value",(function(e){var a=e.val();a?n(e.val()):On.query({id:t}).then((function(e){if(e&&e.length){var a=jn(e);zn.update(t,a),n(a)}else n([])}))}))}):(console.log("No user!"),Promise.resolve([]))},update:function(n,t){return Tn(n).set(t)}},_n=z.createComponent,Rn=z.createDynamic,qn=z.el,Mn=z.updateComponent,Un=z.updateDynamic,Fn={c:function(n){var t,e,a=qn("div");return a.className="l-padding-t4",n.b=Rn(!1,a,n.a),t=qn("div"),t.className="layout horizontal l-padding-t2",t.style.cssText="padding-left: 22px",e=qn("a"),e.className="SeatingTab-addRow",n.d=e,e.onclick=n.c,e.appendChild(document.createTextNode("Add row")),t.appendChild(e),a.appendChild(t),a},u:function(n,t){var e;n.a!==t.a&&(t.b=Un(!1,t.a,t.a=n.a,t.b)),e=n.c,e!==t.c&&(t.d.onclick=e,t.c=e)},r:z.DEADPOOL},Gn={c:function(n){var t=(n.g=_n(Qn,Qn.state,{id:n.a,row:n.b,rowNum:n.c,onAssign:n.d,onAdd:n.e,onRemove:n.f},n)).$n;return t},u:function(n,t){n.e===t.e&&n.d===t.d&&n.c===t.c&&n.b===t.b&&n.a===t.a&&n.f===t.f||(t.g=Mn(Qn,Qn.state,{id:t.a=n.a,row:t.b=n.b,rowNum:t.c=n.c,onAssign:t.d=n.d,onAdd:t.e=n.e,onRemove:t.f=n.f},t.g))},r:z.DEADPOOL},Jn={c:function(n){var t,e,a,r=qn("div");return n.b=Rn(!1,r,n.a),t=qn("div"),t.className="SeatingRow layout horizontal",e=qn("div"),e.className="SeatingRow-controls layout vertical around-justified",a=qn("a"),a.className="SeatingRow-controls-control",n.d=a,a.onclick=n.c,a.appendChild(document.createTextNode("+")),e.appendChild(a),a=qn("a"),a.className="SeatingRow-controls-control",n.f=a,a.onclick=n.e,a.appendChild(document.createTextNode("-")),e.appendChild(a),t.appendChild(e),n.h=Rn(!1,t,n.g),r.appendChild(t),r},u:function(n,t){var e;n.a!==t.a&&(t.b=Un(!1,t.a,t.a=n.a,t.b)),e=n.c,e!==t.c&&(t.d.onclick=e,t.c=e),e=n.e,e!==t.e&&(t.f.onclick=e,t.e=e),n.g!==t.g&&(t.h=Un(!1,t.g,t.g=n.g,t.h))},r:z.DEADPOOL},Bn={c:function(n){var t=qn("a");return n.b=t,t.className=n.a,t.seatindex=n.c,t.onclick=n.d,n.f=Rn(!0,t,n.e),t},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.className=e,t.a=e),e=n.c,e!==t.c&&(t.b.seatindex=e,t.c=e),e=n.d,e!==t.d&&(t.b.onclick=e,t.d=e),n.e!==t.e&&(t.f=Un(!0,t.e,t.e=n.e,t.f))},r:z.DEADPOOL},Yn={c:function(n){var t=(n.e=_n(Wn,Wn.state,{id:n.a,seatIndex:n.b,onAssign:n.c,onClose:n.d},n)).$n;return t},u:function(n,t){n.c===t.c&&n.b===t.b&&n.a===t.a&&n.d===t.d||(t.e=Mn(Wn,Wn.state,{id:t.a=n.a,seatIndex:t.b=n.b,onAssign:t.c=n.c,onClose:t.d=n.d},t.e))},r:z.DEADPOOL},Hn={c:function(n){var t,e=qn("div");return e.className="AssignSeat",t=qn("div"),t.className="AssignSeat-backdrop",n.b=t,t.onclick=n.a,e.appendChild(t),n.d=Rn(!1,e,n.c),e},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.onclick=e,t.a=e),n.c!==t.c&&(t.d=Un(!1,t.c,t.c=n.c,t.d))},r:z.DEADPOOL},Vn={c:function(n){var t=qn("div");return t.className="AssignSeat-card Card",n.b=Rn(!0,t,n.a),t},u:function(n,t){n.a!==t.a&&(t.b=Un(!0,t.a,t.a=n.a,t.b))},r:z.DEADPOOL},Kn={c:function(n){var t=qn("a");return t.className="List-item",n.b=t,t.onclick=n.a,n.d=Rn(!0,t,n.c),t},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.onclick=e,t.a=e),n.c!==t.c&&(t.d=Un(!0,t.c,t.c=n.c,t.d))},r:z.DEADPOOL},Wn=cn(On,"query",(function(n){var t=n.props,e=t.seatIndex,a=t.onAssign,r=t.onClose,o=n.state;return{$s:Hn,a:r,c:o&&{$s:Vn,a:o.sort().map((function(n){return{$s:Kn,a:function(){a({seatIndex:e,student:n})},c:n,key:n}}))}}})),Qn=function(n){var t=n.props,e=t.id,a=t.row,r=t.onAdd,o=t.onRemove,c=t.onAssign,i=n.state.seatIndex,u=n.bindSend;return{$s:Jn,a:null!=i&&{$s:Yn,a:e,b:i,c:c,d:u("onClose")},c:r,e:o,g:a.map((function(n,t){return{$s:Bn,a:"SeatingRow-seat "+("EMPTY"===n?"SeatingRow-seat--empty":""),c:t,d:u("openAssignSeat"),e:n,key:t}}))}};Qn.state={onInit:function(){return{}},onProps:function(){return{}},onClose:function(){return{}},openAssignSeat:function(n,t){var e=n.state,a=t.currentTarget;return a&&null!=a.seatindex?{seatIndex:a.seatindex}:e}};var Xn=cn(zn,"query",(function(n){var t=n.props.id,e=n.state,a=n.bindSend;return{$s:Fn,a:e?e.map((function(n,r){return{$s:Gn,a:t,b:n,c:r,d:function(o){var c=o.seatIndex,i=o.student,u=e.find((function(n){return n.indexOf(i)!==-1})),s=u&&u.indexOf(i);if(u!==r||s!==c){var d=n[c];u&&(u[s]=d),n[c]=i,zn.update(t,e).then(a("refresh"))}},e:function(){e[r]=n.concat("EMPTY"),zn.update(t,e).then(a("refresh"))},f:function(){var o=e[r]=n.slice(0,-1);0===o.length&&e.splice(r,1),zn.update(t,e).then(a("refresh"))},key:n.join("--")}})):[],c:function(){e.push(["EMPTY"]),zn.update(t,e).then(a("refresh"))}}})),Zn=z.createComponent,nt=z.createDynamic,tt=z.el,et=z.updateComponent,at=z.updateDynamic,rt={c:function(n){var t=(n.e=Zn(Dt,Dt.state,{user:n.a,page:n.b,id:n.c,tab:n.d},n)).$n;return t},u:function(n,t){n.c===t.c&&n.b===t.b&&n.a===t.a&&n.d===t.d||(t.e=et(Dt,Dt.state,{user:t.a=n.a,page:t.b=n.b,id:t.c=n.c,tab:t.d=n.d},t.e))},r:z.DEADPOOL},ot={c:function(n){var t=Zn(mt,mt.state,null,n).$n;return t},u:function(){},r:z.DEADPOOL},ct={c:function(n){var t=(n.d=Zn(Y,Y.state,{hrefPrefix:n.a,selected:n.b,tabs:n.c},n)).$n;return t},u:function(n,t){n.b===t.b&&n.a===t.a&&n.c===t.c||(t.d=et(Y,Y.state,{hrefPrefix:t.a=n.a,selected:t.b=n.b,tabs:t.c=n.c},t.d))},r:z.DEADPOOL},it={c:function(n){var t=Zn(M,M.state,{className:"c-white l-padding-h4",name:"three-bars",size:"small"},n).$n;return t},u:function(){},r:z.DEADPOOL},ut={c:function(n){var t,e=tt("div");return t=(n.d=Zn(mn,mn.state,{left:n.a,secondary:n.b,title:n.c},n)).$n,e.appendChild(t),n.f=nt(!1,e,n.e),e},u:function(n,t){n.b===t.b&&n.a===t.a&&n.c===t.c||(t.d=et(mn,mn.state,{left:t.a=n.a,secondary:t.b=n.b,title:t.c=n.c},t.d)),n.e!==t.e&&(t.f=at(!1,t.e,t.e=n.e,t.f))},r:z.DEADPOOL},st={c:function(n){var t=(n.b=Zn(Xn,Xn.state,{id:n.a},n)).$n;return t},u:function(n,t){n.a!==t.a&&(t.b=et(Xn,Xn.state,{id:t.a=n.a},t.b))},r:z.DEADPOOL},dt={c:function(n){var t=(n.b=Zn(En,En.state,{id:n.a},n)).$n;return t},u:function(n,t){n.a!==t.a&&(t.b=et(En,En.state,{id:t.a=n.a},t.b))},r:z.DEADPOOL},lt={c:function(n){var t=(n.b=Zn(Ot,Ot.state,{id:n.a},n)).$n;return t},u:function(n,t){n.a!==t.a&&(t.b=et(Ot,Ot.state,{id:t.a=n.a},t.b))},r:z.DEADPOOL},ft={c:function(n){var t,e,a=tt("div");return a.className="Card",t=tt("div"),t.className="Card-title",e=(n.c=Zn(gt,gt.state,{id:n.a,school:n.b},n)).$n,t.appendChild(e),a.appendChild(t),a},u:function(n,t){n.a===t.a&&n.b===t.b||(t.c=et(gt,gt.state,{id:t.a=n.a,school:t.b=n.b},t.c))},r:z.DEADPOOL},pt={c:function(n){var t=tt("input");return t.className="SchoolPage-input",n.b=t,null!=n.a&&(t.value=n.a),t.oninput=n.c,t},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.value!==e&&(t.b.value=e),t.a=e),e=n.c,e!==t.c&&(t.b.oninput=e,t.c=e)},r:z.DEADPOOL},ht={c:function(n){var t=Zn(M,M.state,{className:"c-white l-padding-h4",name:"three-bars",size:"small"},n).$n;return t},u:function(){},r:z.DEADPOOL},vt={c:function(n){var t,e=tt("div");return t=(n.b=Zn(mn,mn.state,{left:n.a},n)).$n,e.appendChild(t),e},u:function(n,t){n.a!==t.a&&(t.b=et(mn,mn.state,{left:t.a=n.a},t.b))},r:z.DEADPOOL},bt={school:{title:"School"},students:{title:"Students"},seating:{title:"Seating"},rollcall:{title:"Roll Call"}},mt=function(n){var t=n.props;t.user,t.page,t.id,t.tab;return{$s:vt,a:{$s:ht}}},gt=function(n){var t=(n.props.id,n.state),e=n.bindSend;return{$s:pt,a:t,c:e("updateName")}},yt=function(n){var t=n.props;return t.school&&t.school.name};gt.state={onInit:yt,onProps:yt,updateName:function(n,t){var e=n.props.id,a=(n.state,t.target.value);return sn.updateName(e,a),a}};var Ot=cn(sn,"get",(function(n){var t=n.props.id,e=n.state;return{$s:ft,a:t,b:e}})),Ct=function(n,t){return"school"===t?{$s:lt,a:n}:"students"===t?{$s:dt,a:n}:"seating"===t?{$s:st,a:n}:null},Dt=cn(sn,"get",(function(n){var t=n.props,e=(t.user,t.page,t.id),a=t.tab,r=n.state,o=r||{};return{$s:ut,a:{$s:it},b:{$s:ct,a:"#schools/"+e+"/",b:a,c:bt},c:o.name,e:Ct(e,a)}})),At=function(n){var t=n.user,e=n.page,a=n.id,r=n.tab;return"new"===a?{$s:ot}:{$s:rt,a:t,b:e,c:a,d:r}},Nt=z.createComponent,$t=z.createDynamic,Pt=z.el,wt=z.updateComponent,kt=z.updateDynamic,St={c:function(n){var t=(n.b=Nt(Lt,Lt.state,{user:n.a},n)).$n;return t},u:function(n,t){n.a!==t.a&&(t.b=wt(Lt,Lt.state,{user:t.a=n.a},t.b))},r:z.DEADPOOL},It={c:function(n){var t=Pt("body");return t.className="App",n.b=$t(!1,t,n.a),n.d=$t(!1,t,n.c),t},u:function(n,t){n.a!==t.a&&(t.b=kt(!1,t.a,t.a=n.a,t.b)),n.c!==t.c&&(t.d=kt(!1,t.c,t.c=n.c,t.d))},r:z.DEADPOOL},xt={c:function(n){var t=(n.e=Nt(At,At.state,{user:n.a,page:n.b,id:n.c,tab:n.d},n)).$n;return t},u:function(n,t){n.c===t.c&&n.b===t.b&&n.a===t.a&&n.d===t.d||(t.e=wt(At,At.state,{user:t.a=n.a,page:t.b=n.b,id:t.c=n.c,tab:t.d=n.d},t.e))},r:z.DEADPOOL},Et={c:function(n){var t=Pt("button");return n.b=t,t.onclick=n.a,n.d=$t(!0,t,n.c),t},u:function(n,t){var e;e=n.a,e!==t.a&&(t.b.onclick=e,t.a=e),n.c!==t.c&&(t.d=kt(!0,t.c,t.c=n.c,t.d))},r:z.DEADPOOL},Lt=function(n){var t=n.props.user,e=n.state,a=e.page,r=e.id,o=e.tab;return{$s:It,a:!t&&{$s:Et,a:P,c:t?"Sign out":"Sign in"},c:!!a&&!!r&&{$s:xt,a:t,b:a,c:r,d:o}}},Tt=function(n){var t=(n.state,window.location.hash.slice(1)),e=t.split("/"),a=tn(e,3),r=a[0],o=a[1],c=a[2];return{page:r,id:o,tab:c}};Lt.state={onInit:function(n){var t=n.bindSend;return window.onhashchange=t("handleHashChange"),Tt({})},onProps:Tt,handleHashChange:Tt};var jt=function(n){return{$s:St,a:n}};firebase.initializeApp({apiKey:"AIzaSyByU0ftUO7ECBLGGCb4awfe-u0ITxt0NVw",authDomain:"roll-call-1440c.firebaseapp.com",databaseURL:"https://roll-call-1440c.firebaseio.com",storageBucket:"roll-call-1440c.appspot.com",messagingSenderId:"115688293946"}),document.body=z.render(jt(on.current())),firebase.auth().onAuthStateChanged((function(n){return n?void on.get(n.uid).catch((function(){return on.save({id:n.uid,displayName:n.displayName,schools:{_init:{name:"School #1",terms:["08-01-2016,11-31-2016","11-31-2016,01-31-2017","02-01-2017,05-31-2017"]}}})})).then((function(n){on.setCurrent(n.id);var t=Object.keys(n.schools)[0],e=window.location.hash;e&&"#"!==e||(window.location.hash="#schools/"+t+"/school")})):z.rerender(document.body,jt(null,null))}))})();

