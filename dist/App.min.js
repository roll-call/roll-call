var TICKER=(function(){"use strict";function e(){}function n(){this.map=new e}function t(e,n){E(e),n.removeChild(e.$n)}function a(e,n,a){for(;a<e.length;)t(e[a++],n)}function r(e,n){for(var t=0;t<e.length;)E(e[t++]);n.textContent=""}function o(e,n){return e.$s===n.$s&&(n.$s.u(n,e),!0)}function c(e,n,t,a){null===a?u(e,n,t):i(e,n,t,a)}function i(e,n,t,a){for(;t<n.length;)e.insertBefore((n[t]=y(n[t])).$n,a),++t}function u(e,n,t){for(;t<n.length;)e.appendChild((n[t]=y(n[t])).$n),++t}function s(e,n,t){var a=document.createDocumentFragment(),r=N(e,a,n);return I(t,a),r}function d(e,n,t,r){for(var o=0;o<n.length&&o<t.length;o++)n[o]=A(t[o],n[o]);o<n.length?c(e,n,o,r):a(t,e,o)}function l(e,n,t){t.length?n.length?d(e,n,t,null):r(t,e):u(e,n,0)}function f(e,n,t,o){return e instanceof Array?(t?l(n,e,o):d(n.parentNode,e,o,n),n):t?(r(o,n),N(!0,n,e)):void a(o,n.parentNode,0)}function p(e,n,t){if(!(e instanceof Object))return n.nodeValue=$(e)?"":e,n}function h(e,n,t,a){var r=void 0;if(e&&o(r=a.$r||a,e))return e.$r=r,n}function v(n,t,a,r){this._boundActions=new e,this._parentInst=a,this.actions=r,this.props=t,this.render=n,this.bindSend=this.bindSend.bind(this),this.state=r.onInit(this),this.$n=C(this._instance=n(this))}function b(e,n,t,a){return new v(e,n,t,a)}function m(e,n){var t=e(n);return C(t),t}function g(e,n,t,a){var r=(n?b:m)(e,t||S,a,n);return r}function D(e,n,t,a){var r=n?a.updateProps(t):A(a,e(t));return r}function C(e){var n=e.$s.c(e);return e.$n=n,n.xvdom=e,n}function y(e){var n=e.$s,t=n.r.pop(e.key);return t?(n.u(e,t),t):(C(e),e)}function N(e,n,t){return t instanceof Array?(u(n,t,0),e?n:n.appendChild(L(""))):n.appendChild(t instanceof Object?C(t):L($(t)?"":t))}function O(e,n,t,a){return(n instanceof Object?n instanceof Array?f(t,a,e,n):h(t,a,e,n):p(t,a,e))||s(e,t,a)}function A(e,n){return o(e,n)?e:(I(e.$n,(n=y(n)).$n),E(e),n)}function w(e){var n=this.tabs,t=this.selected,a=this.hrefPrefix,r=n[e],o=r.href,c=r.title;return{$s:B,a:"Tabs-tab u-cursor-pointer l-padding-h4 l-padding-b2 "+(t===e?"is-selected":""),c:""+a+(o||e),d:c||e,key:e}}function k(e){var n=this.item,t=this.context,a=this.itemClass,r=n(e,t),o=r.href,c=r.key,i=r.icon,u=r.text;return{$s:wt,a:"List-item layout horizontal center t-normal "+(a||""),c:o,d:i&&{$s:kt,a:i},f:u,key:c}}function P(){if(firebase.auth().currentUser)return ie.unsetCurrent(),firebase.auth().signOut();var e=new firebase.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/plus.login"),firebase.auth().signInWithPopup(e).catch((function(e){return console.error(e)}))}var $=function(e){return null==e||e===!0||e===!1},S={},x={push:function(){},pop:function(){}};e.prototype=Object.create(null),n.prototype.push=function(e){var n=e.key,t=this.map;e.$x=t[n],t[n]=e},n.prototype.pop=function(e){var n=this.map[e];if(n)return this.map[e]=n.$x,n};var E=function(e){e.$s.r.push(e)},L=function(e){return document.createTextNode(e)},I=function(e,n){var t=e.parentNode;t&&t.replaceChild(n,e)};v.prototype.updateProps=function(e){var n=this.props;return this.props=e,this.actions.onProps?this.send("onProps",n):this.rerender(),this},v.prototype.bindSend=function(e){return this._boundActions[e]||(this._boundActions[e]=this.send.bind(this,e))},v.prototype.send=function(e,n){var t=void 0,a=this.actions[e];a&&(t=a(this,n))!=this.state&&(this.state=t,this.rerender())},v.prototype.rerender=function(){var e=A(this._instance,this.render(this));this._instance=e,e.$n.xvdom=this._parentInst};var T=function(e){return y(e).$n},j=function(e,n){return A(e.xvdom,n).$n},z=function(e){t(e.xvdom,e.parentNode)},R={createComponent:g,createDynamic:N,el:function(e){return document.createElement(e)},render:T,rerender:j,unmount:z,updateComponent:D,updateDynamic:O,Pool:n,DEADPOOL:x},M=R.el,Y={c:function(e){var n=M("i");return e.b=n,n.className=e.a,n.onClickArg=e.c,n.onClickFn=e.d,n.onclick=e.e,n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.b.onClickArg=t,n.c=t),t=e.d,t!==n.d&&(n.b.onClickFn=t,n.d=t),t=e.e,t!==n.e&&(n.b.onclick=t,n.e=t)},r:R.DEADPOOL},q=function(e){var n=e.currentTarget;n.onClickFn(n.onClickArg)},_=function(e){var n=e.className,t=e.name,a=e.onClick,r=e.onClickArg,o=e.size,c=void 0===o?"med":o;return{$s:Y,a:"Icon Icon--"+c+" octicon octicon-"+t+" "+n+" t-center",c:r,d:a,e:a&&q}},F=R.createDynamic,U=R.el,G=R.updateDynamic,J={c:function(e){var n=U("div");return n.className="Tabs layout horizontal end center-justified c-white l-height10 t-font-size-14 t-uppercase t-normal",e.b=F(!0,n,e.a),n},u:function(e,n){e.a!==n.a&&(n.b=G(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},B={c:function(e){var n=U("a");return e.b=n,n.className=e.a,null!=e.c&&(n.href=e.c),e.e=F(!0,n,e.d),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.b.href!==t&&(n.b.href=t),n.c=t),e.d!==n.d&&(n.e=G(!0,n.d,n.d=e.d,n.e))},r:R.DEADPOOL},H=function(e){return{$s:J,a:Object.keys(e.tabs).map(w,e)}},K="ticker:storage",V=void 0;try{V=JSON.parse(localStorage.getItem(K))}catch(e){}V||localStorage.setItem(K,JSON.stringify(V=[]));var W=function(){var e=V.pop();e&&(localStorage.removeItem(e),X(e,!1))},Q=function(e,n){for(var t=V.length;t--;)try{return void localStorage.setItem(e,n)}catch(e){W()}},X=function(e,n){var t=V.indexOf(e);t>=0&&V.splice(t,1),n&&V.unshift(e),Q(K,JSON.stringify(V))},Z=function(e){X(e,!0)},ee={getItem:function(e){var n=localStorage.getItem(e);return n&&Z(e),n},setItem:function(e,n){return Q(e,n),Z(e),n},getItemObj:function(e){var n=this.getItem(e),t=n&&JSON.parse(n);return t},setItemObj:function(e,n){return this.setItem(e,JSON.stringify(n)),n}},ne=(function(){function e(e){this.value=e}function n(n){function t(e,n){return new Promise(function(t,r){var i={key:e,arg:n,resolve:t,reject:r,next:null};c?c=c.next=i:(o=c=i,a(e,n))})}function a(t,o){try{var c=n[t](o),i=c.value;i instanceof e?Promise.resolve(i.value).then((function(e){a("next",e)}),(function(e){a("throw",e)})):r(c.done?"return":"normal",c.value)}catch(e){r("throw",e)}}function r(e,n){switch(e){case"return":o.resolve({value:n,done:!0});break;case"throw":o.reject(n);break;default:o.resolve({value:n,done:!1})}o=o.next,o?a(o.key,o.arg):c=null}var o,c;this._invoke=t,"function"!=typeof n.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new n(e.apply(this,arguments))}},await:function(n){return new e(n)}}}(),Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}),te=(function(){function e(e,n){var t=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(t.push(c.value),!n||t.length!==n);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),ae=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},re="rc:lastLoggedInUserId",oe=function(e){return firebase.database().ref("users/"+e)},ce=function(e){return ee.setItemObj("rc:"+e.id,e)},ie={current:function(){var e=ee.getItem(re);if(e)return this.localGet(e)},getCurrentId:function(){return ee.getItem(re)},setCurrent:function(e){return ee.setItem(re,e)},unsetCurrent:function(){var e=this.current();e&&(ee.setItemObj("rc:"+e.id,""),ee.setItem(re,""))},localGet:function(e){return ee.getItemObj("rc:"+e)},save:function(e){return new Promise(function(n,t){oe(e.id).set(e,(function(a){return a?t(a):void n(ce(ne({},e)))}))})},get:function(e){return new Promise(function(n,t){oe(e).once("value",(function(e){var a=e.val();return a?void n(ce(a)):t("Couldn't find User")}))})}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return firebase.database().ref("users/"+ie.getCurrentId()+"/schools/"+e)},se={query:function(){var e=ie.getCurrentId();return e?new Promise(function(e,n){ue().once("value",(function(t){var a=t.val();return a?void e(a):n("Couldn't find schools for user "+id)}))}):void console.log("No user!")},create:function(e){var n=ue().push();return n.set({name:e}).then((function(){return n.getKey()}))},updateName:function(e,n){ue(e).update({name:n})},update:function(e,n){return ue(e).update(n)},get:function(e){var n=e.id;return new Promise(function(e,t){ue(n).once("value",(function(a){var r=a.val();return r?void e(r):t("Couldn't find schools for user "+n)}))})}},de=function(e,n,t){var a=function(t){var a=t.props,r=t.bindSend,o="function"==typeof e?e(a):e;return o[n](a).then(r("onLoadModel")),null};return t.state={onInit:a,onProps:function(e){return a(e),e.state},onLoadModel:function(e,n){return n},refresh:function(e){return a(e),e.state}},t},le=R.createComponent,fe=R.createDynamic,pe=R.el,he=R.updateComponent,ve=R.updateDynamic,be={c:function(e){var n,t,a,r=pe("div");return e.b=r,r.className=e.a,n=pe("div"),e.d=n,n.className=e.c,t=pe("div"),t.className="layout horizontal center-center l-height14",a=(e.f=le(_,_.state,{className:"c-white l-padding-h4",name:"three-bars",onClick:e.e,size:"small"},e)).$n,t.appendChild(a),a=pe("div"),a.className="l-padding-r0 t-truncate t-font-size-20 flex",e.h=a,a.textContent=e.g,t.appendChild(a),e.j=fe(!1,t,e.i),n.appendChild(t),e.l=fe(!1,n,e.k),r.appendChild(n),r},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.d.className=t,n.c=t),e.e!==n.e&&(n.f=he(_,_.state,{className:"c-white l-padding-h4",name:"three-bars",onClick:n.e=e.e,size:"small"},n.f)),t=e.g,t!==n.g&&(n.h.textContent=t,n.g=t),e.i!==n.i&&(n.j=ve(!1,n.i,n.i=e.i,n.j)),e.k!==n.k&&(n.l=ve(!1,n.k,n.k=e.k,n.l))},r:R.DEADPOOL},me=function(){aa.showDrawer()},ge=function(e){var n=e.props,t=n.title,a=n.secondary,r=(n.left,n.right),o=e.state.scrollClass;return{$s:be,a:"AppToolbar "+(a?"AppToolbar--withSecondary":""),c:"AppToolbar-bar fixed fixed--top c-white bg-purple "+o,e:me,g:t,i:r,k:a}},De=function(e){var n=document.body?document.body.scrollTop:0,t=n>56&&n-e>0;return{scrollTop:n,scrollClass:t?" is-scrolling-down":""}};ge.state={onInit:function(e){var n=e.bindSend;return requestAnimationFrame((function(){return document.body.onscroll=n("onScroll")})),De(0)},onScroll:function(e){var n=e.state.scrollTop;return De(n)}};var Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return firebase.database().ref("users/"+ie.getCurrentId()+"/schools/"+e+"/students")},ye={query:function(e){var n=e.id,t=ie.getCurrentId();return t?new Promise(function(e){Ce(n).once("value",(function(n){e(n.val()||[])}))}):(console.log("No user!"),Promise.resolve([]))},update:function(e,n){return Ce(e).set(n)}},Ne=R.createComponent,Oe=R.createDynamic,Ae=R.el,we=R.updateComponent,ke=R.updateDynamic,Pe={c:function(e){var n,t,a=Ae("div");return n=Ae("div"),n.className="Card",t=Ae("div"),t.className="Card-title",e.b=Oe(!1,t,e.a),e.d=Oe(!1,t,e.c),n.appendChild(t),a.appendChild(n),a},u:function(e,n){e.a!==n.a&&(n.b=ke(!1,n.a,n.a=e.a,n.b)),e.c!==n.c&&(n.d=ke(!1,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},$e={c:function(){var e=Ae("h1");return e.className="c-gray-dark t-center",e.appendChild(document.createTextNode("No students")),e},u:function(){},r:R.DEADPOOL},Se={c:function(e){var n,t=Ae("div");return t.className="List-item layout horizontal",n=Ae("span"),n.className="flex",e.b=Oe(!0,n,e.a),t.appendChild(n),n=Ae("a"),e.d=n,n.onclick=e.c,n.appendChild(document.createTextNode("remove")),t.appendChild(n),t},u:function(e,n){var t;e.a!==n.a&&(n.b=ke(!0,n.a,n.a=e.a,n.b)),t=e.c,t!==n.c&&(n.d.onclick=t,n.c=t)},r:R.DEADPOOL},xe={c:function(e){var n=(e.d=Ne(Le,Le.state,{id:e.a,students:e.b,onAdd:e.c},e)).$n;return n},u:function(e,n){e.b===n.b&&e.a===n.a&&e.c===n.c||(n.d=we(Le,Le.state,{id:n.a=e.a,students:n.b=e.b,onAdd:n.c=e.c},n.d))},r:R.DEADPOOL},Ee={c:function(e){var n,t=Ae("div");return t.className="layout horizontal",n=Ae("input"),n.className="SchoolPage-input flex",e.b=n,n.oninput=e.a,null!=e.c&&(n.value=e.c),n.placeholder="Student's Name",t.appendChild(n),n=Ae("a"),e.e=n,n.hidden=e.d,n.className="self-center l-margin-l2",n.onclick=e.f,n.appendChild(document.createTextNode("Add")),t.appendChild(n),t},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.oninput=t,n.a=t),t=e.c,t!==n.c&&(n.b.value!==t&&(n.b.value=t),n.c=t),t=e.d,t!==n.d&&(n.e.hidden=t,n.d=t),t=e.f,t!==n.f&&(n.e.onclick=t,n.f=t)},r:R.DEADPOOL},Le=function(e){var n=e.state,t=e.bindSend;return{$s:Ee,a:t("updateName"),c:n,d:!n,f:t("addStudent")}};Le.state={onInit:function(){return""},onProps:function(){return""},updateName:function(e,n){return n.target.value},addStudent:function(e,n){var t=e.props,a=t.id,r=t.students,o=t.onAdd,c=e.state;return c&&r.indexOf(c)===-1&&ye.update(a,r.concat(c)).then(o),""}};var Ie=de(ye,"query",(function(e){var n=e.props.id,t=e.state,a=e.bindSend;return{$s:Pe,a:t&&{$s:xe,a:n,b:t,c:a("refresh")},c:t&&t.length?t.map((function(e,r){return{$s:Se,a:e,c:function(){ye.update(n,t.filter((function(n){return n!==e}))).then(a("refresh"))},key:e}})):[{$s:$e,key:"EMPTY"}]}})),Te=10,je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return firebase.database().ref("users/"+ie.getCurrentId()+"/schools/"+e+"/seating")},ze=function(e){for(var n=e.slice(),t=[];n.length>0;)t.push(n.splice(0,Te));return t},Re={query:function(e){var n=e.id,t=ie.getCurrentId();return t?new Promise(function(e){je(n).once("value",(function(t){var a=t.val();a?e(t.val()):ye.query({id:n}).then((function(t){if(t&&t.length){var a=ze(t);Re.update(n,a),e(a)}else e([])}))}))}):(console.log("No user!"),Promise.resolve([]))},update:function(e,n){return je(e).set(n)}},Me=R.createComponent,Ye=R.createDynamic,qe=R.el,_e=R.updateComponent,Fe=R.updateDynamic,Ue={c:function(e){var n,t,a=qe("div");return a.className="l-padding-t4",e.b=Ye(!1,a,e.a),n=qe("div"),n.className="layout horizontal l-padding-t2",n.style.cssText="padding-left: 22px",t=qe("a"),t.className="SeatingTab-addRow",e.d=t,t.onclick=e.c,t.appendChild(document.createTextNode("Add row")),n.appendChild(t),a.appendChild(n),a},u:function(e,n){var t;e.a!==n.a&&(n.b=Fe(!1,n.a,n.a=e.a,n.b)),t=e.c,t!==n.c&&(n.d.onclick=t,n.c=t)},r:R.DEADPOOL},Ge={c:function(e){var n=(e.g=Me(Xe,Xe.state,{id:e.a,row:e.b,rowNum:e.c,onAssign:e.d,onAdd:e.e,onRemove:e.f},e)).$n;return n},u:function(e,n){e.e===n.e&&e.d===n.d&&e.c===n.c&&e.b===n.b&&e.a===n.a&&e.f===n.f||(n.g=_e(Xe,Xe.state,{id:n.a=e.a,row:n.b=e.b,rowNum:n.c=e.c,onAssign:n.d=e.d,onAdd:n.e=e.e,onRemove:n.f=e.f},n.g))},r:R.DEADPOOL},Je={c:function(e){var n,t,a,r=qe("div");return e.b=Ye(!1,r,e.a),n=qe("div"),n.className="SeatingRow layout horizontal",t=qe("div"),t.className="SeatingRow-controls layout vertical around-justified",a=qe("a"),a.className="SeatingRow-controls-control",e.d=a,a.onclick=e.c,a.appendChild(document.createTextNode("+")),t.appendChild(a),a=qe("a"),a.className="SeatingRow-controls-control",e.f=a,a.onclick=e.e,a.appendChild(document.createTextNode("-")),t.appendChild(a),n.appendChild(t),e.h=Ye(!1,n,e.g),r.appendChild(n),r},u:function(e,n){var t;e.a!==n.a&&(n.b=Fe(!1,n.a,n.a=e.a,n.b)),t=e.c,t!==n.c&&(n.d.onclick=t,n.c=t),t=e.e,t!==n.e&&(n.f.onclick=t,n.e=t),e.g!==n.g&&(n.h=Fe(!1,n.g,n.g=e.g,n.h))},r:R.DEADPOOL},Be={c:function(e){var n=qe("a");return e.b=n,n.className=e.a,n.onclick=e.c,n.seatindex=e.d,e.f=Ye(!0,n,e.e),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.b.onclick=t,n.c=t),t=e.d,t!==n.d&&(n.b.seatindex=t,n.d=t),e.e!==n.e&&(n.f=Fe(!0,n.e,n.e=e.e,n.f))},r:R.DEADPOOL},He={c:function(e){var n=(e.e=Me(Qe,Qe.state,{id:e.a,onAssign:e.b,onClose:e.c,seatIndex:e.d},e)).$n;return n},u:function(e,n){e.c===n.c&&e.b===n.b&&e.a===n.a&&e.d===n.d||(n.e=_e(Qe,Qe.state,{id:n.a=e.a,onAssign:n.b=e.b,onClose:n.c=e.c,seatIndex:n.d=e.d},n.e))},r:R.DEADPOOL},Ke={c:function(e){var n,t=qe("div");return t.className="AssignSeat",n=qe("div"),n.className="AssignSeat-backdrop",e.b=n,n.onclick=e.a,t.appendChild(n),e.d=Ye(!1,t,e.c),t},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t),e.c!==n.c&&(n.d=Fe(!1,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},Ve={c:function(e){var n,t=qe("div");return t.className="AssignSeat-card Card",n=qe("a"),n.className="List-item c-gray-dark",e.b=n,n.onclick=e.a,n.appendChild(document.createTextNode("EMPTY")),t.appendChild(n),e.d=Ye(!1,t,e.c),t},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t),e.c!==n.c&&(n.d=Fe(!1,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},We={c:function(e){var n=qe("a");return n.className="List-item",e.b=n,n.onclick=e.a,e.d=Ye(!0,n,e.c),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t),e.c!==n.c&&(n.d=Fe(!0,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},Qe=de(ye,"query",(function(e){var n=e.props,t=n.seatIndex,a=n.onAssign,r=n.onClose,o=e.state;return{$s:Ke,a:r,c:o&&{$s:Ve,a:function(){a({seatIndex:t,student:"EMPTY"})},c:o.sort().map((function(e){return{$s:We,a:function(){a({seatIndex:t,student:e})},c:e,key:e}}))}}})),Xe=function(e){var n=e.props,t=n.id,a=n.row,r=n.onAdd,o=n.onRemove,c=n.onAssign,i=e.state.seatIndex,u=e.bindSend;return{$s:Je,a:null!=i&&{$s:He,a:t,b:c,c:u("onClose"),d:i},c:r,e:o,g:a.map((function(e,n){return{$s:Be,a:"SeatingRow-seat "+("EMPTY"===e?"SeatingRow-seat--empty":""),c:u("openAssignSeat"),d:n,e:e,key:n}}))}};Xe.state={onInit:function(){return{}},onProps:function(){return{}},onClose:function(){return{}},openAssignSeat:function(e,n){var t=e.state,a=n.currentTarget;return a&&null!=a.seatindex?{seatIndex:a.seatindex}:t}};var Ze=de(Re,"query",(function(e){var n=e.props.id,t=e.state,a=e.bindSend;return{$s:Ue,a:t?t.map((function(e,r){return{$s:Ge,a:n,b:e,c:r,d:function(o){var c=o.seatIndex,i=o.student;if("EMPTY"!==i){var u=t.find((function(e){return e.indexOf(i)!==-1})),s=u&&u.indexOf(i);if(u===r&&s===c)return;var d=e[c];u&&(u[s]=d)}e[c]=i,Re.update(n,t).then(a("refresh"))},e:function(){t[r]=e.concat("EMPTY"),Re.update(n,t).then(a("refresh"))},f:function(){var o=t[r]=e.slice(0,-1);0===o.length&&t.splice(r,1),Re.update(n,t).then(a("refresh"))},key:e.join("--")}})):[],c:function(){t.push(["EMPTY"]),Re.update(n,t).then(a("refresh"))}}})),en=function(e){return""+(e<10?"0":"")+e},nn=function(e){return e.getFullYear()+"-"+en(e.getMonth()+1)+"-"+en(e.getDate())},tn=function(e,n){return firebase.database().ref("users/"+ie.getCurrentId()+"/schools/"+e+"/rollcall/"+nn(n))},an={query:function(e){var n=e.id,t=e.date,a=ie.getCurrentId();return a?new Promise(function(e){tn(n,t).once("value",(function(n){e(n.val()||[])}))}):(console.log("No user!"),Promise.resolve([]))},update:function(e,n,t){return tn(e,n).set(t)}},rn=["Here","Absent","No Instrument"],on=R.createComponent,cn=R.createDynamic,un=R.el,sn=R.updateComponent,dn=R.updateDynamic,ln={c:function(e){var n,t,a,r=un("div");return n=un("div"),n.className="layout horizontal center-center l-padding-t4",t=un("div"),t.className="Rollcall-date layout horizontal center-center",a=un("a"),a.className="Rollcall-dateInc",e.b=a,a.onclick=e.a,a.appendChild(document.createTextNode("<")),t.appendChild(a),a=un("div"),a.className="flex t-center",e.d=cn(!1,a,e.c),a.appendChild(document.createTextNode(" - ")),e.f=cn(!1,a,e.e),a.appendChild(document.createTextNode(" - ")),e.h=cn(!1,a,e.g),t.appendChild(a),a=un("a"),a.className="Rollcall-dateInc",e.j=a,a.onclick=e.i,a.appendChild(document.createTextNode(">")),t.appendChild(a),n.appendChild(t),r.appendChild(n),n=(e.m=on(An,An.state,{date:e.k,id:e.l},e)).$n,r.appendChild(n),r},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t),e.c!==n.c&&(n.d=dn(!1,n.c,n.c=e.c,n.d)),e.e!==n.e&&(n.f=dn(!1,n.e,n.e=e.e,n.f)),e.g!==n.g&&(n.h=dn(!1,n.g,n.g=e.g,n.h)),t=e.i,t!==n.i&&(n.j.onclick=t,n.i=t),e.k===n.k&&e.l===n.l||(n.m=sn(An,An.state,{date:n.k=e.k,id:n.l=e.l},n.m))},r:R.DEADPOOL},fn={c:function(e){var n=un("div");return e.b=cn(!0,n,e.a),n},u:function(e,n){e.a!==n.a&&(n.b=dn(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},pn={c:function(e){var n=(e.d=on(On,On.state,{id:e.a,onToggleStatus:e.b,rollcall:e.c},e)).$n;return n},u:function(e,n){e.b===n.b&&e.a===n.a&&e.c===n.c||(n.d=sn(On,On.state,{id:n.a=e.a,onToggleStatus:n.b=e.b,rollcall:n.c=e.c},n.d))},r:R.DEADPOOL},hn={c:function(e){var n=un("div");return e.b=cn(!0,n,e.a),n},u:function(e,n){e.a!==n.a&&(n.b=dn(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},vn={c:function(e){var n=(e.f=on(Nn,Nn.state,{id:e.a,onToggleStatus:e.b,rollcall:e.c,row:e.d,rowNum:e.e},e)).$n;return n},u:function(e,n){e.d===n.d&&e.c===n.c&&e.b===n.b&&e.a===n.a&&e.e===n.e||(n.f=sn(Nn,Nn.state,{id:n.a=e.a,onToggleStatus:n.b=e.b,rollcall:n.c=e.c,row:n.d=e.d,rowNum:n.e=e.e},n.f))},r:R.DEADPOOL},bn={c:function(e){var n,t=un("div");return t.className="l-padding-l4",n=un("div"),n.className="SeatingRow layout horizontal",e.b=cn(!0,n,e.a),t.appendChild(n),t},u:function(e,n){e.a!==n.a&&(n.b=dn(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},mn={c:function(e){var n,t=un("a");return e.b=t,t.className=e.a,t.onclick=e.c,n=un("div"),e.e=cn(!0,n,e.d),t.appendChild(n),n=un("div"),n.className="flex layout vertical center-center",e.g=cn(!0,n,e.f),t.appendChild(n),t},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.b.onclick=t,n.c=t),e.d!==n.d&&(n.e=dn(!0,n.d,n.d=e.d,n.e)),e.f!==n.f&&(n.g=dn(!0,n.f,n.f=e.f,n.g))},r:R.DEADPOOL},gn="EMPTY",Dn=function(e,n){return n.find((function(n){var t=te(n,1),a=t[0];return a===e}))},Cn=function(e,n){var t=Dn(e,n);return t?t[1]:""},yn=function(e,n){var t=Cn(e,n);return"Here"===t?"is-here":"Absent"===t?"is-absent":"No Instrument"===t?"is-no-instrument":""},Nn=function(e){var n=e.row,t=e.rollcall,a=e.onToggleStatus;return{$s:bn,a:n.map((function(e,n){return{$s:mn,a:"\n            SeatingRow-seat layout vertical center-center\n            "+(e===gn?"SeatingRow-seat--empty":"")+"\n            "+yn(e,t)+"\n          ",c:e===gn?null:function(){return a(e)},d:e===gn?"":e,f:Cn(e,t),key:n}}))}},On=de(Re,"query",(function(e){var n=e.props,t=n.id,a=n.rollcall,r=n.onToggleStatus,o=e.state;return{$s:hn,a:o?o.map((function(e,n){return{$s:vn,a:t,b:r,c:a,d:e,e:n,key:e.join("--")}})):[]}})),An=de(an,"query",(function(e){var n=e.props.id,t=e.state,a=e.bindSend;return{$s:fn,a:t&&{$s:pn,a:n,b:a("onToggleStatus"),c:t}}})),wn=function(e){return rn[(rn.indexOf(e)+1)%rn.length]};An.state.onToggleStatus=function(e,n){var t=e.props,a=t.id,r=t.date,o=e.state;if(n){var c=Dn(n,o);return c?c[1]=wn(c[1]):(c=[n,rn[0]],o.push(c)),an.update(a,r,o),[].concat(ae(o))}};var kn=function(e){var n=e.props.id,t=e.state,a=e.bindSend;return{$s:ln,a:a("decDate"),c:t.getMonth()+1,e:t.getDate(),g:t.getFullYear(),i:a("incDate"),k:t,l:n}},Pn=function(){return new Date},$n=function(e,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+n)};kn.state={onInit:Pn,onProps:Pn,decDate:function(e){var n=e.state;return $n(n,-1)},incDate:function(e){var n=e.state;return $n(n,1)}};var Sn=function(e){return""+(e<10?"0":"")+e},xn=function(e){return e.getFullYear()+"-"+Sn(e.getMonth()+1)+"-"+Sn(e.getDate())},En=function(e){return firebase.database().ref("users/"+ie.getCurrentId()+"/schools/"+e+"/rollcall/")},Ln=function(e){var n={};return Object.keys(e||{}).forEach((function(t){var a=e[t];a.forEach((function(e){var t=te(e,2),a=t[0],r=t[1],o=n[a];o||(n[a]=o={});var c=o[r];o[r]=c?c+1:1}))})),Object.keys(n).sort().map((function(e){return[e,n[e]]}))},In={query:function(e){var n=e.id,t=e.startDate,a=e.endDate,r=ie.getCurrentId();return r?new Promise(function(e){En(n).startAt(null,xn(t)).endAt(null,xn(a)).once("value",(function(n){e(Ln(n.val()))}))}):(console.log("No user!"),Promise.resolve([]))}},Tn=R.createComponent,jn=R.createDynamic,zn=R.el,Rn=R.updateComponent,Mn=R.updateDynamic,Yn={c:function(e){var n,t,a,r=zn("div");return n=zn("div"),n.className="Card",t=zn("div"),t.className="Card-title layout horizontal center-center",a=(e.c=Tn(Bn,Bn.state,{value:e.a,onChange:e.b},e)).$n,t.appendChild(a),a=zn("div"),a.className="l-margin-h4",a.appendChild(document.createTextNode("to")),t.appendChild(a),a=(e.f=Tn(Bn,Bn.state,{value:e.d,onChange:e.e},e)).$n,t.appendChild(a),n.appendChild(t),r.appendChild(n),n=(e.j=Tn(Vn,Vn.state,{id:e.g,startDate:e.h,endDate:e.i},e)).$n,r.appendChild(n),r},u:function(e,n){e.a===n.a&&e.b===n.b||(n.c=Rn(Bn,Bn.state,{value:n.a=e.a,onChange:n.b=e.b},n.c)),e.d===n.d&&e.e===n.e||(n.f=Rn(Bn,Bn.state,{value:n.d=e.d,onChange:n.e=e.e},n.f)),e.h===n.h&&e.g===n.g&&e.i===n.i||(n.j=Rn(Vn,Vn.state,{id:n.g=e.g,startDate:n.h=e.h,endDate:n.i=e.i},n.j))},r:R.DEADPOOL},qn={c:function(e){var n,t,a,r=zn("div");return r.className="Card",n=zn("div"),n.className="Card-title",t=zn("div"),t.className="List-item layout horizontal justified c-gray-dark",a=zn("div"),a.className="flex",a.appendChild(document.createTextNode("Name")),t.appendChild(a),e.b=jn(!1,t,e.a),n.appendChild(t),e.d=jn(!1,n,e.c),r.appendChild(n),r},u:function(e,n){e.a!==n.a&&(n.b=Mn(!1,n.a,n.a=e.a,n.b)),e.c!==n.c&&(n.d=Mn(!1,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},_n={c:function(e){var n,t=zn("div");return t.className="List-item layout horizontal justified",n=zn("div"),n.className="flex",e.b=jn(!0,n,e.a),t.appendChild(n),e.d=jn(!1,t,e.c),t},u:function(e,n){e.a!==n.a&&(n.b=Mn(!0,n.a,n.a=e.a,n.b)),e.c!==n.c&&(n.d=Mn(!1,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},Fn={c:function(e){var n=zn("div");return n.className="flex t-center",e.b=jn(!0,n,e.a),n},u:function(e,n){e.a!==n.a&&(n.b=Mn(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},Un={c:function(e){var n=zn("div");return n.className="flex t-center",e.b=jn(!0,n,e.a),n},u:function(e,n){e.a!==n.a&&(n.b=Mn(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},Gn={c:function(e){var n=zn("input");return n.className="SchoolPage-input t-center",e.b=n,n.oninput=e.a,null!=e.c&&(n.value=e.c),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.oninput=t,n.a=t),t=e.c,t!==n.c&&(n.b.value!==t&&(n.b.value=t),n.c=t)},r:R.DEADPOOL},Jn=/(\d\d?)-(\d\d?)-(\d\d\d\d)/,Bn=function(e){var n=e.state,t=e.bindSend;return{$s:Gn,a:t("onInput"),c:n}},Hn=function(e){return Jn.test(e)},Kn=function(e){var n=e.props.value;return n};Bn.state={onInit:Kn,onProps:Kn,onInput:function(e,n){var t=e.props,a=(t.id,t.onChange),r=e.state,o=n.target.value;return r!==o&&Hn(o)&&setTimeout((function(){a(o)}),0),o}};var Vn=de(In,"query",(function(e){var n=e.props,t=(n.startDate,n.endDate,e.state);return{$s:qn,a:rn.map((function(e){return{$s:Un,a:e,key:e}})),c:t?t.map((function(e){var n=te(e,2),t=n[0],a=n[1];return{$s:_n,a:t,c:rn.map((function(e){return{$s:Fn,a:a[e]||0,key:e}})),key:t}})):[]}})),Wn=function(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()},Qn=function(e){var n=e.props.id,t=e.state,a=t.startDate,r=t.endDate,o=e.bindSend;return{$s:Yn,a:Wn(a),b:o("onStartDateChange"),d:Wn(r),e:o("onEndDateChange"),g:n,h:a,i:r}},Xn=function(){var e=new Date;return{endDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()),startDate:new Date(e.getFullYear(),e.getMonth()-3,e.getDate())}};Qn.state={onInit:Xn,onProps:Xn,onStartDateChange:function(e,n){var t=e.state,a=Jn.exec(n).slice(1),r=te(a,3),o=r[0],c=r[1],i=r[2],u=new Date(+i,+o-1,+c);return ne({},t,{startDate:u})},onEndDateChange:function(e,n){var t=e.state,a=Jn.exec(n).slice(1),r=te(a,3),o=r[0],c=r[1],i=r[2],u=new Date(+i,+o-1,+c);return ne({},t,{endDate:u})}};var Zn=R.createComponent,et=R.createDynamic,nt=R.el,tt=R.updateComponent,at=R.updateDynamic,rt={c:function(e){var n=(e.d=Zn(H,H.state,{hrefPrefix:e.a,selected:e.b,tabs:e.c},e)).$n;return n},u:function(e,n){e.b===n.b&&e.a===n.a&&e.c===n.c||(n.d=tt(H,H.state,{hrefPrefix:n.a=e.a,selected:n.b=e.b,tabs:n.c=e.c},n.d))},r:R.DEADPOOL},ot={c:function(e){var n,t=nt("div");return n=(e.c=Zn(ge,ge.state,{secondary:e.a,title:e.b},e)).$n,t.appendChild(n),e.e=et(!1,t,e.d),t},u:function(e,n){e.a===n.a&&e.b===n.b||(n.c=tt(ge,ge.state,{secondary:n.a=e.a,title:n.b=e.b},n.c)),e.d!==n.d&&(n.e=at(!1,n.d,n.d=e.d,n.e))},r:R.DEADPOOL},ct={c:function(e){var n=(e.b=Zn(Qn,Qn.state,{id:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=tt(Qn,Qn.state,{id:n.a=e.a},n.b))},r:R.DEADPOOL},it={c:function(e){var n=(e.b=Zn(kn,kn.state,{id:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=tt(kn,kn.state,{id:n.a=e.a},n.b))},r:R.DEADPOOL},ut={c:function(e){var n=(e.b=Zn(Ze,Ze.state,{id:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=tt(Ze,Ze.state,{id:n.a=e.a},n.b))},r:R.DEADPOOL},st={c:function(e){var n=(e.b=Zn(Ie,Ie.state,{id:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=tt(Ie,Ie.state,{id:n.a=e.a},n.b))},r:R.DEADPOOL},dt={c:function(e){var n=(e.b=Zn(bt,bt.state,{id:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=tt(bt,bt.state,{id:n.a=e.a},n.b))},r:R.DEADPOOL},lt={c:function(e){var n,t,a=nt("div");return a.className="Card",n=nt("div"),n.className="Card-title",t=(e.c=Zn(ht,ht.state,{id:e.a,school:e.b},e)).$n,n.appendChild(t),a.appendChild(n),a},u:function(e,n){e.a===n.a&&e.b===n.b||(n.c=tt(ht,ht.state,{id:n.a=e.a,school:n.b=e.b},n.c))},r:R.DEADPOOL},ft={c:function(e){var n=nt("input");return n.className="SchoolPage-input",e.b=n,n.oninput=e.a,null!=e.c&&(n.value=e.c),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.oninput=t,n.a=t),t=e.c,t!==n.c&&(n.b.value!==t&&(n.b.value=t),n.c=t)},r:R.DEADPOOL},pt={school:{title:"School"},students:{title:"Students"},seating:{title:"Seating"},rollcall:{title:"Attendance"},reports:{title:"Reports"}},ht=function(e){var n=(e.props.id,e.state),t=e.bindSend;return{$s:ft,a:t("updateName"),c:n}},vt=function(e){var n=e.props;return n.school&&n.school.name};ht.state={onInit:vt,onProps:vt,updateName:function(e,n){var t=e.props.id,a=(e.state,n.target.value);return se.updateName(t,a),a}};var bt=de(se,"get",(function(e){var n=e.props.id,t=e.state;return{$s:lt,a:n,b:t}})),mt=function(e,n){switch(n){case"school":return{$s:dt,a:e};case"students":return{$s:st,a:e};case"seating":return{$s:ut,a:e};case"rollcall":return{$s:it,a:e};case"reports":return{$s:ct,a:e}}},gt=de(se,"get",(function(e){var n=e.props,t=n.id,a=n.tab,r=e.state;return{$s:ot,a:{$s:rt,a:"#schools/"+t+"/",b:a,c:pt},b:r?r.name:"",d:mt(t,a)}})),Dt=R.createComponent,Ct=R.createDynamic,yt=R.el,Nt=R.updateComponent,Ot=R.updateDynamic,At={c:function(e){var n=yt("div");return e.b=n,n.className=e.a,n.hidden=e.c,e.e=Ct(!0,n,e.d),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.b.hidden=t,n.c=t),e.d!==n.d&&(n.e=Ot(!0,n.d,n.d=e.d,n.e))},r:R.DEADPOOL},wt={c:function(e){var n,t=yt("a");return e.b=t,t.className=e.a,null!=e.c&&(t.href=e.c),e.e=Ct(!1,t,e.d),n=yt("div"),n.className="l-margin-l3",e.g=Ct(!0,n,e.f),t.appendChild(n),t},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),t=e.c,t!==n.c&&(n.b.href!==t&&(n.b.href=t),n.c=t),e.d!==n.d&&(n.e=Ot(!1,n.d,n.d=e.d,n.e)),e.f!==n.f&&(n.g=Ot(!0,n.f,n.f=e.f,n.g))},r:R.DEADPOOL},kt={c:function(e){var n=(e.b=Dt(_,_.state,{name:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=Nt(_,_.state,{name:n.a=e.a},n.b))},r:R.DEADPOOL},Pt=function(e){return e},$t=function(e){var n=e.className,t=e.context,a=e.list,r=e.transform,o=void 0===r?Pt:r,c=o?o(a,t):a||[];return{$s:At,a:n,c:!c.length,d:c.map(k,e)}},St=R.createComponent,xt=R.createDynamic,Et=R.el,Lt=R.updateComponent,It=R.updateDynamic,Tt={c:function(e){var n=Et("div");return e.b=n,n.className=e.a,e.d=xt(!0,n,e.c),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.className=t,n.a=t),e.c!==n.c&&(n.d=It(!0,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},jt={c:function(e){var n,t,a=Et("div");return n=Et("a"),n.className="List-item layout horizontal center",e.b=n,n.onclick=e.a,t=Et("span"),t.className="t-center",t.textContent="Add a School",n.appendChild(t),a.appendChild(n),a.appendChild(St(_t,_t.state,null,e).$n),a},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t)},r:R.DEADPOOL},zt={c:function(e){var n=(e.d=St($t,$t.state,{item:e.a,itemClass:"List-item--noDivider",list:e.b,transform:e.c},e)).$n;return n},u:function(e,n){e.b===n.b&&e.a===n.a&&e.c===n.c||(n.d=Lt($t,$t.state,{item:n.a=e.a,itemClass:"List-item--noDivider",list:n.b=e.b,transform:n.c=e.c},n.d));
},r:R.DEADPOOL},Rt={c:function(e){var n=Et("div");return e.b=xt(!0,n,e.a),n},u:function(e,n){e.a!==n.a&&(n.b=It(!0,n.a,n.a=e.a,n.b))},r:R.DEADPOOL},Mt=function(e){var n=te(e,2),t=n[0],a=n[1].name;return{href:"#schools/"+t+"/school",key:a,text:{$s:Rt,a:a},icon:"bookmark"}},Yt=function(e,n){var t=e.toLowerCase(),a=n.toLowerCase();return t<a?-1:t>a?1:0},qt=function(e){return Object.keys(e).sort((function(n,t){return Yt(e[n].name,e[t].name)})).map((function(n){return[n,e[n]]}))},_t=de(se,"query",(function(e){var n=e.state;return{$s:zt,a:Mt,b:n?n:[],c:qt}})),Ft=!1,Ut=function(e){var n=e.user,t=e.enabled,a=e.onNewSchool;Ft=t||Ft;var r=t?"is-enabled":"",o=Ft?"is-rendered":"";return{$s:Tt,a:"AppDrawer fixed scroll "+r+" "+o,c:t&&n&&{$s:jt,a:a}}},Gt=R.createComponent,Jt=R.createDynamic,Bt=R.el,Ht=R.updateComponent,Kt=R.updateDynamic,Vt={c:function(e){var n=Gt(aa,aa.state,null,e).$n;return n},u:function(){},r:R.DEADPOOL},Wt={c:function(e){var n,t=Bt("body");return t.className="App",e.b=Jt(!1,t,e.a),e.d=Jt(!1,t,e.c),n=Bt("div"),e.f=n,n.className=e.e,n.onclick=e.g,t.appendChild(n),n=(e.k=Gt(Ut,Ut.state,{user:e.h,enabled:e.i,onNewSchool:e.j},e)).$n,t.appendChild(n),e.m=Jt(!1,t,e.l),t},u:function(e,n){var t;e.a!==n.a&&(n.b=Kt(!1,n.a,n.a=e.a,n.b)),e.c!==n.c&&(n.d=Kt(!1,n.c,n.c=e.c,n.d)),t=e.e,t!==n.e&&(n.f.className=t,n.e=t),t=e.g,t!==n.g&&(n.f.onclick=t,n.g=t),e.i===n.i&&e.h===n.h&&e.j===n.j||(n.k=Ht(Ut,Ut.state,{user:n.h=e.h,enabled:n.i=e.i,onNewSchool:n.j=e.j},n.k)),e.l!==n.l&&(n.m=Kt(!1,n.l,n.l=e.l,n.m))},r:R.DEADPOOL},Qt={c:function(e){var n=(e.b=Gt(ta,ta.state,{onCancel:e.a},e)).$n;return n},u:function(e,n){e.a!==n.a&&(n.b=Ht(ta,ta.state,{onCancel:n.a=e.a},n.b))},r:R.DEADPOOL},Xt={c:function(e){var n=(e.e=Gt(gt,gt.state,{user:e.a,page:e.b,id:e.c,tab:e.d},e)).$n;return n},u:function(e,n){e.c===n.c&&e.b===n.b&&e.a===n.a&&e.d===n.d||(n.e=Ht(gt,gt.state,{user:n.a=e.a,page:n.b=e.b,id:n.c=e.c,tab:n.d=e.d},n.e))},r:R.DEADPOOL},Zt={c:function(e){var n,t=Bt("div");return t.style.cssText="position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px;",t.className="layout horizontal center-center",n=Bt("a"),e.b=n,n.onclick=e.a,n.className="l-padding-4",n.style.cssText="background: #CCC; border-radius: 6px;",e.d=Jt(!0,n,e.c),t.appendChild(n),t},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t),e.c!==n.c&&(n.d=Kt(!0,n.c,n.c=e.c,n.d))},r:R.DEADPOOL},ea={c:function(e){var n,t,a,r,o=Bt("div");return n=Bt("div"),n.className="AssignSeat layout horizontal center-center",t=Bt("div"),t.className="NewSchool-dialog Card l-padding-4",a=Bt("input"),a.className="SchoolPage-input",e.b=a,a.oninput=e.a,a.placeholder="School's Name",null!=e.c&&(a.value=e.c),t.appendChild(a),a=Bt("div"),a.className="l-margin-t4 l-padding-t4 t-right",e.e=Jt(!1,a,e.d),r=Bt("a"),r.className="l-margin-h4",e.g=r,r.onclick=e.f,r.appendChild(document.createTextNode("Cancel")),a.appendChild(r),t.appendChild(a),n.appendChild(t),o.appendChild(n),o},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.oninput=t,n.a=t),t=e.c,t!==n.c&&(n.b.value!==t&&(n.b.value=t),n.c=t),e.d!==n.d&&(n.e=Kt(!1,n.d,n.d=e.d,n.e)),t=e.f,t!==n.f&&(n.g.onclick=t,n.f=t)},r:R.DEADPOOL},na={c:function(e){var n=Bt("a");return n.className="l-margin-h4",e.b=n,n.onclick=e.a,n.appendChild(document.createTextNode("Add")),n},u:function(e,n){var t;t=e.a,t!==n.a&&(n.b.onclick=t,n.a=t)},r:R.DEADPOOL},ta=function(e){var n=e.props.onCancel,t=e.state,a=t.name,r=t.canAdd,o=e.bindSend;return{$s:ea,a:o("updateName"),c:a,d:r&&{$s:na,a:function(){se.create(a).then((function(e){window.location.hash="#schools/"+e+"/school"}))}},f:n}};ta.state={onInit:function(){return{name:""}},updateName:function(e,n){var t=n.target.value;return{name:t,canAdd:!!t}}};var aa=function(e){var n=e.state,t=n.drawerEnabled,a=n.user,r=n.page,o=n.id,c=n.tab,i=n.checkedLogin,u=n.showAddSchool,s=e.bindSend;return{$s:Wt,a:!a&&i&&{$s:Zt,a:P,c:a?"Sign out":"Sign in"},c:a&&r&&o&&{$s:Xt,a:a,b:r,c:o,d:c},e:"App-backdrop fixed "+(t||u?"is-enabled":""),g:s("disableDrawer"),h:a,i:t,j:s("onNewSchool"),l:a&&u&&{$s:Qt,a:s("closeNewSchool")}}},ra=function(e){var n=e.state,t=window.location.hash.slice(1);if(t){var a=t.split("/"),r=te(a,3),o=r[0],c=r[1],i=r[2];return ne({},n,{showAddSchool:!1,drawerEnabled:!1,page:o,id:c,tab:i})}return ie.get(ie.getCurrentId()).then((function(e){var n=Object.keys(e.schools)[0];window.location.hash;window.location.hash="#schools/"+n+"/school"})),n||{}};return firebase.initializeApp({apiKey:"AIzaSyByU0ftUO7ECBLGGCb4awfe-u0ITxt0NVw",authDomain:"roll-call-1440c.firebaseapp.com",databaseURL:"https://roll-call-1440c.firebaseio.com",storageBucket:"roll-call-1440c.appspot.com",messagingSenderId:"115688293946"}),aa.state={onInit:function(e){var n=e.bindSend;return aa.showDrawer=n("enableDrawer"),firebase.auth().onAuthStateChanged((function(e){return e?void ie.get(e.uid).catch((function(){return ie.save({id:e.uid,displayName:e.displayName,schools:{_init:{name:"School #1"}}})})).then((function(e){ie.setCurrent(e.id);var t=Object.keys(e.schools)[0],a=window.location.hash;a&&"#"!==a||(window.location.hash="#schools/"+t+"/school"),n("onUser")(e)})):n("onUser")(e)})),window.onhashchange=n("handleHashChange"),ra({user:ie.current()})},enableDrawer:function(e){var n=e.state;return ne({},n,{drawerEnabled:!0})},disableDrawer:function(e){var n=e.state;return ne({},n,{drawerEnabled:!1})},onNewSchool:function(e){var n=e.state;return ne({},n,{showAddSchool:!0,drawerEnabled:!1})},closeNewSchool:function(e){var n=e.state;return ne({},n,{showAddSchool:!1})},onUser:function(e,n){var t=e.state;return ne({},t,{user:n,checkedLogin:!0})},handleHashChange:ra},document.body=R.render({$s:Vt}),aa})();

